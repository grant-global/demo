# 28ï½œå¦‚ä½•åˆ›å»ºAIæ™ºèƒ½ä½“ç®¡ç†ç¬”è®°å’Œæ”¶é›†ä¿¡æ¯ï¼ˆäºŒï¼‰
ä½ å¥½ï¼Œæˆ‘æ˜¯æœˆå½±ã€‚

åœ¨ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬å®ç°äº†æ™ºèƒ½æ”¶è—åŠ©æ‰‹çš„ç½‘é¡µæ”¶è—æµç¨‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å®ç°å…¶ä»–åŠŸèƒ½ã€‚

é¦–å…ˆæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„åŠŸèƒ½â€”â€”å†…å®¹è½¬å†™ã€‚

ä¸ºä»€ä¹ˆè¯´è¿™ä¸ªåŠŸèƒ½é‡è¦å‘¢ï¼Ÿæˆ‘ä»¬åšæŠ€æœ¯çš„åŒå­¦ï¼Œå¹³æ—¶éƒ½ä¼šé‡åˆ°éœ€è¦æ”¶é›†å’ŒæŸ¥é˜…ç¬¬ä¸€æ‰‹è‹±æ–‡æŠ€æœ¯èµ„æ–™çš„æ—¶å€™ï¼Œä½†æ˜¯å¯¹è‹±æ–‡å†…å®¹çš„é˜…è¯»å’Œç†è§£ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½èƒ½åƒé˜…è¯»ä¸­æ–‡ä¸€æ ·é«˜æ•ˆã€‚ä»¥å‰æˆ‘ä»¬å¾ˆéš¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æœ‰äº† AIï¼Œæˆ‘ä»¬ç°åœ¨æœ‰æ›´å¥½çš„åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚

## å°†è‹±æ–‡å†…å®¹è½¬å†™ä¸ºä¸­æ–‡

é¦–å…ˆæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå°†ä»»æ„ä¸€ç¯‡è‹±æ–‡ç½‘é¡µå†…å®¹è½¬å†™ä¸ºä¸­æ–‡ï¼Œå¹¶ä¿å­˜æˆé£ä¹¦æ–‡æ¡£çš„å·¥ä½œæµ **RewriteContent**ï¼Œå®ƒçš„å·¥ä½œæµé€»è¾‘å¦‚ä¸‹ï¼š

![å›¾ç‰‡](images/883388/e57cd05b4c0yyd87274da9591yyfc8f2.png)

ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬è°ƒç”¨ä¸Šä¸€èŠ‚å®ç°çš„ **LinkReaderPro**ï¼Œä»ç½‘é¡µä¸­è¯»å–è‹±æ–‡å†…å®¹ã€‚

![å›¾ç‰‡](images/883388/39f38a56cc74e6e113yy216b896b656e.png)

æ¥ç€æˆ‘ä»¬ç”¨ä¸¤ä¸ªå¤§æ¨¡å‹èŠ‚ç‚¹ï¼Œä»è¯»å–é“¾æ¥çš„å†…å®¹ä¸­è½¬å†™ä¸­æ–‡æ ‡é¢˜å’Œä¸­æ–‡æ­£æ–‡å†…å®¹ã€‚

![å›¾ç‰‡](images/883388/97e0f7fc7ef5c3c6a058cf640ae15fe2.png)

æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸€ä¸‹å®ƒä»¬çš„æç¤ºè¯ï¼š

> æå–æ ‡é¢˜ï¼šç³»ç»Ÿæç¤ºè¯

```typescript
ç”¨æˆ·è¾“å…¥çš„æ˜¯ä¸€ç¯‡æŠ€æœ¯æ–‡ç« æ‘˜è¦ï¼Œä½ åªéœ€è¦æå–å‡ºå®ƒçš„**æ–‡ç« æ ‡é¢˜**ã€‚

å¦‚æœæ ‡é¢˜ä¸æ˜¯ä¸­æ–‡ï¼Œå°†å®ƒç¿»è¯‘æˆä¸­æ–‡ã€‚

è¾“å‡ºæ ‡é¢˜çš„æ–‡æœ¬å†…å®¹å°±è¡Œï¼Œä¸è¦å¸¦æœ‰ä»»ä½•Markdownæ ¼å¼ã€‚

```

> æå–æ ‡é¢˜ï¼šç”¨æˆ·æç¤ºè¯

```typescript
{{input}}

```

è½¬å†™æ­£æ–‡çš„é…ç½®ï¼š

![å›¾ç‰‡](images/883388/dff983ayyf5ff2a8e08bb60f6e9ef589.png)

> è½¬å†™æ­£æ–‡ï¼šç³»ç»Ÿæç¤ºè¯

```typescript
å°†æ–‡ç« è½¬å†™ä¸ºä¸­æ–‡å†…å®¹ï¼Œå¹¶é‡æ–°ç»„ç»‡å†…å®¹ï¼Œä»¥æ–¹ä¾¿åˆå­¦è€…ç†è§£ã€‚

- æ ‡é¢˜å·²ç»ç¿»è¯‘è¿‡äº†ï¼Œå¿½ç•¥ã€åŸæ–‡å†…å®¹ã€‘ä¸­çš„æ ‡é¢˜
- ä¿æŒæ–‡ç« çš„åŸå§‹å†…å®¹ä¿¡æ¯å®Œå…¨ä¸ä¸¢å¤±ã€‚
- é‡‡ç”¨åˆé€‚çš„æ–¹ä¾¿é˜…è¯»çš„Markdownæ ¼å¼ï¼Œå°¤å…¶æ³¨æ„æ ‡é¢˜çš„å±‚æ¬¡ã€‚
- ä¿ç•™åŸæ–‡ä¸­çš„å›¾ç‰‡é“¾æ¥ã€‚
- æ–‡ç« ä¸­å¦‚åŒ…å«å®æ“ï¼Œå¾ªåºæ¸è¿›ï¼ŒæŠŠä»£ç æ“ä½œæ­¥éª¤è®²æ¸…æ¥šã€‚
- å¦‚æœæœ‰æ¯”è¾ƒæ·±çš„æ¦‚å¿µï¼Œå¢åŠ ä¸€äº›ä¾¿äºåˆå­¦è€…ç†è§£çš„æ¯”å–»æˆ–è§£é‡Šã€‚
- å¦‚æœ‰ä¸æ–‡ç« å†…å®¹æ— å…³çš„æ–‡å­—ï¼Œå°†å…¶å»æ‰ã€‚
- ä¿æŒæ­£æ–‡æ ‡é¢˜ä¸ä¸­æ–‡æ ‡é¢˜çš„ç¿»è¯‘ä¸€è‡´ã€‚

```

> è½¬å†™æ­£æ–‡ï¼šç”¨æˆ·æç¤ºè¯

```typescript
# ä¸­æ–‡æ ‡é¢˜
{{title}}

# åŸæ–‡å†…å®¹
{{content}}

```

æœ‰åŒå­¦å¯èƒ½ä¼šé—®ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç”¨ä¸€ä¸ªå¤§æ¨¡å‹åŒæ—¶æå–æ ‡é¢˜å’Œæ­£æ–‡è¾“å‡ºJSONæ ¼å¼ï¼Œè€Œè¦è¿™æ ·ç”¨ä¸¤ä¸ªå¤§æ¨¡å‹èŠ‚ç‚¹åˆ†åˆ«è¾“å‡ºæ ‡é¢˜å’Œæ­£æ–‡å‘¢ï¼Ÿ

å®é™…ä¸Šæœ¬æ¥åº”è¯¥å¯ä»¥ç”¨ä¸€ä¸ªå¤§æ¨¡å‹å®Œæˆçš„ï¼Œä½†æ˜¯å®é™…åœ¨Cozeä¸­æµ‹è¯•ä¸‹æ¥ï¼Œå¯èƒ½ç”±äºå¾ˆå¤šæ–‡ç« å†…å®¹è¾ƒé•¿ï¼Œåœ¨æ­£æ–‡contentå†…å®¹è¿‡é•¿çš„æƒ…å†µä¸‹ï¼ŒJSONæ ¼å¼æ— æ³•æ­£å¸¸è¯†åˆ«è¾“å‡ºã€‚æ‰€ä»¥æˆ‘å°±é€€è€Œæ±‚å…¶æ¬¡ï¼Œé‡‡ç”¨äº†ä¸¤æ­¥è¾“å‡ºçš„æ–¹å¼ï¼Œå¦‚æœä¸åœ¨Cozeä¸­ï¼Œè€Œæ˜¯è‡ªå·±ç”¨Lingå®ç°çš„å·¥ä½œæµï¼Œç”¨ä¸€ä¸ªå¤§æ¨¡å‹èŠ‚ç‚¹åº”è¯¥å°±å¤Ÿäº†ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®ç°ä¸€ä¸ªç»†èŠ‚ï¼Œå°±æ˜¯åœ¨è½¬å†™åçš„æ­£æ–‡å‰é¢ï¼Œå¢åŠ ä¸€ä¸ªåŸæ–‡é“¾æ¥å¼•ç”¨ã€‚

è¿™ä¸ªå¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªæ–‡æœ¬å¤„ç†èŠ‚ç‚¹æ¥å®Œæˆã€‚

![å›¾ç‰‡](images/883388/c8e439363676893471f6a54ff9e7bacf.png)

æœ€åï¼Œæˆ‘ä»¬ç”¨å®˜æ–¹é£ä¹¦æ–‡æ¡£çš„æ’ä»¶ **create\_document**ï¼Œå°† doc\_url é€šè¿‡ç»“æŸèŠ‚ç‚¹è¾“å‡ºå³å¯ã€‚

![å›¾ç‰‡](images/883388/388e07799468b0aa70116ac671cf4992.png)

è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†å°†è‹±æ–‡å†…å®¹è½¬å†™ä¸ºä¸­æ–‡çš„ä¸»ä½“æµç¨‹ã€‚

æ¥ç€æˆ‘ä»¬ä½¿ç”¨å®ƒå’Œä¸Šä¸€èŠ‚è¯¾çš„æ”¶è—ç½‘å€æµç¨‹ç»“åˆï¼Œå°±å¯ä»¥å®ç°å®Œæ•´çš„è½¬å†™å·¥ä½œæµ **AI\_Favorites\_Rewrite**ã€‚

![å›¾ç‰‡](images/883388/0b88a00b9c9dbb3c644ca8ff0cdd284a.png)

æ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ–‡ç« æ’°å†™äº†ï¼Œæ”¶è—çš„é“¾æ¥ä¸æ˜¯æ–‡ç« åŸæ–‡ï¼Œè€Œæ˜¯è½¬å†™çš„æ–‡æ¡£ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è°ƒç”¨å·¥ä½œæµ **AI\_Favorites** æ—¶ï¼Œå°† type è®¾ç½®ä¸ºâ€œç¬”è®°â€è€Œä¸æ˜¯é»˜è®¤çš„â€œç½‘é¡µâ€ã€‚

![å›¾ç‰‡](images/883388/eec834ac0f5024bdd11488af2fb160fe.png)

è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†æ”¶è—åŠ©æ‰‹é‡Œè‹±æ–‡å†…å®¹è½¬å†™ä¸ºä¸­æ–‡çš„åŠŸèƒ½ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°ç¬¬ä¸‰ä¸ªåŠŸèƒ½ï¼šæ™ºèƒ½ç¬”è®°ã€‚

## æ•´ç†æ™ºèƒ½ç¬”è®°

ä¸è½¬å†™æ–‡ç« ç›¸æ¯”ï¼Œæ™ºèƒ½ç¬”è®°çš„å·¥ä½œæµä¼šç¨å¾®å¤æ‚ä¸€äº›ï¼Œå®ƒçš„å·¥ä½œæµé€»è¾‘å¦‚ä¸‹ï¼š

![å›¾ç‰‡](images/883388/ffa762b63a95c328168487be9153cdc6.png)

é¦–å…ˆï¼Œåœ¨å¼€å§‹èŠ‚ç‚¹ä¸­ï¼Œæˆ‘ä»¬é™¤äº†è¾“å…¥æ–‡æœ¬ä¿¡æ¯å¤–ï¼Œè¿˜æ·»åŠ é™„ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå›¾ç‰‡æ•°ç»„ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸Šä¼ å›¾ç‰‡ç»™åŠ©æ‰‹ï¼Œè®©å®ƒå¸®æˆ‘ä»¬è®°å½•ã€‚

![å›¾ç‰‡](images/883388/6c356aa1e23b86a864bcd541d85a13ba.png)

æ¥ä¸‹æ¥æ˜¯ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡å¤„ç†ã€‚

![å›¾ç‰‡](images/883388/ff2a2f8acf9a6ee3d2bcde47818946d6.png)

æˆ‘ä»¬é¦–å…ˆç”¨æ–‡æœ¬å¤„ç†èŠ‚ç‚¹æ‹¼æ¥ä¸€ä¸ªå›¾åƒè¯†åˆ«çš„æç¤ºè¯ï¼Œç„¶åç”¨ä¸€ä¸ªå¾ªç¯æ¥å¯¹æ¯ä¸€ä¸ªé™„ä»¶å›¾ç‰‡åˆ†åˆ«å¤„ç†ã€‚æ³¨æ„è¿™é‡Œä¹Ÿå¯ä»¥ç”¨æ‰¹å¤„ç†æ›¿ä»£å¾ªç¯ï¼Œä½†è€ƒè™‘åˆ°Cozeçš„å¹¶å‘é™åˆ¶ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œé€‰æ‹©äº†å¾ªç¯ä½“ï¼Œè¿™æ ·å¦‚æœå›¾ç‰‡å¾ˆå¤šï¼Œå¤„ç†èµ·æ¥å°±æ˜¯æ—¶é—´æ…¢ä¸€ç‚¹ï¼Œä½†æ˜¯ä¸ä¼šå› ä¸ºè¶…è¿‡å¹¶å‘é™åˆ¶è€Œäº§ç”Ÿé”™è¯¯ã€‚

åœ¨å¾ªç¯ä½“å†…ï¼Œæˆ‘ä»¬åšä¸¤ä»¶äº‹æƒ…ï¼Œä¸€æ˜¯æˆ‘ä»¬å°†å›¾ç‰‡ç”¨å®˜æ–¹å›¾åƒè¯†åˆ«æ’ä»¶è¿›è¡Œè¯†åˆ«ï¼ŒäºŒæ˜¯æˆ‘ä»¬ç”¨ä¸€ä¸ªè‡ªå®šä¹‰å›¾ç‰‡ä¸Šä¼ æ’ä»¶ **upload**ï¼Œå°†ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡è½¬å­˜åˆ°é˜¿é‡Œäº‘ä¸Šã€‚

### å›¾ç‰‡ä¸Šä¼  upload æ’ä»¶

è¿™ä¸ª upload æ’ä»¶ä½ å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œå…·ä½“æ–¹æ³•æ˜¯åœ¨ coze èµ„æºé¢æ¿ä¸­æ–°å»ºæ’ä»¶ï¼š

![å›¾ç‰‡](images/883388/cf9dbac1648b158f2cc1b0609e61d80f.png)

ç„¶ååœ¨æ’ä»¶çš„ Coze IDE ä¸­çš„å·¥å…·åˆ—è¡¨é‡Œæ·»åŠ å·¥å…· uploadï¼Œä»£ç å¦‚ä¸‹ï¼š

```typescript
import { Args } from '@/runtime';
import { Input, Output } from "@/typings/upload/upload";
import Client from 'ali-oss';

interface UploadFileResponse {
  HttpCode: number;
  Message: string;
  url?: string;
}

interface OssConfig {
  OSS_ACCESS_KEY_ID: string,
  OSS_ACCESS_KEY_SECRET: string,
  OSS_STORAGE_HOST_URL: string,
  OSS_CDN_URL: string,
  OSS_REGION: string,
  OSS_BUCKET: string,
}

function randomFileName(fileName) {
  const randomStr = Math.random().toString(36).slice(2);
  if (/\.([^.]+)$/.test(fileName)) {
    return fileName.replace(/\.([^.]+)$/, `-${randomStr}.$1`);
  }
  return `${fileName}-${randomStr}`;
}

async function uploadFile(ossConfig: OssConfig, buffer: any, filename: string, dir: string = 'resource'): Promise<UploadFileResponse> {
  const client = new Client({
    region: ossConfig.OSS_REGION, // ç¤ºä¾‹ï¼š'oss-cn-hangzhou'ï¼Œå¡«å†™Bucketæ‰€åœ¨åœ°åŸŸã€‚
    accessKeyId: ossConfig.OSS_ACCESS_KEY_ID, // ç¡®ä¿å·²è®¾ç½®ç¯å¢ƒå˜é‡OSS_ACCESS_KEY_IDã€‚
    accessKeySecret: ossConfig.OSS_ACCESS_KEY_SECRET, // ç¡®ä¿å·²è®¾ç½®ç¯å¢ƒå˜é‡OSS_ACCESS_KEY_SECRETã€‚
    bucket: ossConfig.OSS_BUCKET, // ç¤ºä¾‹ï¼š'my-bucket-name'ï¼Œå¡«å†™å­˜å‚¨ç©ºé—´åç§°ã€‚
  });

  const hostUrl = ossConfig.OSS_STORAGE_HOST_URL;
  const cdnUrl = ossConfig.OSS_CDN_URL;

  filename = randomFileName(filename);
  if (filename.startsWith('-')) {
    filename = filename.slice(1);
  }

  try {
    const data: UploadFileResponse = { HttpCode: 201, Message: 'ä¸Šä¼ æˆåŠŸ' };
    const res = await client.put(`${dir}/${filename}`, buffer);
    if (res.res.status === 200) {
      data.url = res.url.replace(hostUrl, cdnUrl);
    }
    return data;
  } catch (ex) {
    console.error(ex);
    return { HttpCode: 500, Message: ex, url: filename };
  }
}

const randomFile = (ext: string = '') => {
  const ret = Math.random().toString(36).slice(2, 8);
  if (ext) return `${ret}.${ext}`;
  return ret;
}

/**
  * Each file needs to export a function named `handler`. This function is the entrance to the Tool.
  * @param {Object} args.input - input parameters, you can get test input value by input.xxx.
  * @param {Object} args.logger - logger instance used to print logs, injected by runtime
  * @returns {*} The return data of the function, which should match the declared output parameters.
  *
  * Remember to fill in input/output in Metadata, it helps LLM to recognize and use tool.
  */
export async function handler({ input, logger }: Args<Input>): Promise<Output> {
  let inputBuffer = input.buffer;
  let filename = input.filename;
  let buffer: Buffer;

  if (typeof inputBuffer === 'string' && /^https?:\/\//.test(inputBuffer)) {
    // å›¾ç‰‡è½¬å­˜
    const res = await fetch(inputBuffer);
    const arrayBuffer = await res.arrayBuffer();

    if (!filename) {
      const bytes = new Uint8Array(arrayBuffer);
      if (bytes[0] === 0x89 && bytes[1] === 0x50) {
        console.log('æ˜¯ PNG æ ¼å¼');
        filename = randomFile('png');
      } else if (bytes[0] === 0xFF && bytes[1] === 0xD8) {
        console.log('æ˜¯ JPEG æ ¼å¼');
        filename = randomFile('jpg');
      } else if (bytes[0] === 0x47 && bytes[1] === 0x49) {
        console.log('æ˜¯ GIF æ ¼å¼');
        filename = randomFile('gif');
      } else {
        console.log('æœªçŸ¥æ ¼å¼');
        filename = randomFile();
      }
    }

    buffer = Buffer.from(arrayBuffer);
  } else {
    buffer = Buffer.from(inputBuffer);
  }

  const file = await uploadFile(
    {
      OSS_ACCESS_KEY_ID: input.OSS_ACCESS_KEY_ID,
      OSS_ACCESS_KEY_SECRET: input.OSS_ACCESS_KEY_SECRET,
      OSS_STORAGE_HOST_URL: input.OSS_STORAGE_HOST_URL,
      OSS_CDN_URL: input.OSS_CDN_URL,
      OSS_BUCKET: input.OSS_BUCKET,
      OSS_REGION: input.OSS_REGION,
    },
    buffer,
    filename || randomFile(),
  );
  return {
    file,
  };
};

```

è®¾ç½®å…ƒæ•°æ®ä¸­çš„è¾“å…¥ã€è¾“å‡ºå‚æ•°ï¼š

![å›¾ç‰‡](images/883388/d45515f9b21yy0966229c5f011debd0b.png)

æ›´è¯¦ç»†çš„æ’ä»¶åˆ›å»ºå’Œä½¿ç”¨æ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥å›é¡¾â€œåŠ é¤1â€é‚£ç¯‡å†…å®¹ï¼Œç°åœ¨è®©æˆ‘ä»¬å›åˆ°æ­£é¢˜ã€‚

### æ™ºèƒ½ç¬”è®°çš„ AI åˆ†æ

è®°æ™ºèƒ½ç¬”è®°çš„æ—¶å€™ï¼Œé™¤äº†è®°å½•ç¬”è®°å†…å®¹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥è®© AI æœç´¢èµ„æ–™ï¼Œç„¶åç»™æˆ‘ä»¬åšä¸€äº›åˆ†æã€‚

å…·ä½“çš„åšæ³•æ˜¯ï¼Œæˆ‘ä»¬å…ˆæ‹¼æ¥å¥½ç”¨æˆ·è¾“å…¥å†…å®¹çš„æ–‡æœ¬ï¼Œç„¶åè°ƒç”¨ä¸€ä¸ª **AI\_Notes\_RAG** çš„å­å·¥ä½œæµã€‚

![å›¾ç‰‡](images/883388/0d0183b405e9fc8f49d7f66a74616e91.png)

AI\_Notes\_RAG å·¥ä½œæµé€»è¾‘å¦‚ä¸‹ã€‚

![å›¾ç‰‡](images/883388/82444a12cb35a4537bf6aee9d2cf4cac.png)

æˆ‘ä»¬å…ˆç”¨è±†åŒ…å¤§æ¨¡å‹è¯»å–ç”¨æˆ·è¾“å…¥å¹¶æå– queryã€‚

![å›¾ç‰‡](images/883388/428cbf9b8411b5abab5e21d9cabfb2dd.png)

ç„¶åç”¨ query æ‰¹é‡æ‰§è¡Œå¿…åº”æœç´¢ï¼Œå†å°†ç»“æœç”¨ä»£ç èŠ‚ç‚¹è¿›è¡Œå¤„ç†ï¼Œå…·ä½“çš„å¤„ç†é€»è¾‘å¦‚ä¸‹ï¼š

```typescript
async function main({ params }: Args): Promise<Output> {
    const output = params.input.map(item => JSON.parse(item.response_for_model).join('\n')).join('\n\n');
    // æ„å»ºè¾“å‡ºå¯¹è±¡
    const ret = {
        output,
        size: [...output].length
    };

    return ret;
}

```

å¦‚æœæœç´¢ç»“æœè¾“å‡ºçš„å†…å®¹å¤ªå¤šäº†ï¼Œæˆ‘ä»¬å†ç”¨ä¸€ä¸ªå¤§æ¨¡å‹ç²¾ç®€å†…å®¹ï¼Œæœ€åå°†ç»“æœè¿”å›ç»™ç»“æŸèŠ‚ç‚¹ã€‚

![å›¾ç‰‡](images/883388/d38ff9d7ec166d412b4ebbb416d04936.png)

è®©æˆ‘ä»¬å›åˆ° AI\_Notes å·¥ä½œæµã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ä¸€ä¸ª DeepSeek å¤§æ¨¡å‹æ•´ç†ç¬”è®°ã€‚

![å›¾ç‰‡](images/883388/8a7099082d9d8e846136b3d5857060e0.png)

å®ƒçš„ç³»ç»Ÿæç¤ºè¯å’Œç”¨æˆ·æç¤ºè¯åˆ†åˆ«å¦‚ä¸‹ï¼š

> ç³»ç»Ÿæç¤ºè¯

```markdown
ä½ æ˜¯ç¬”è®°æ•´ç†ä¸“å®¶ï¼Œå°†ç”¨æˆ·ç»™ä½ çš„èµ„æ–™æ•´ç†æˆç¬”è®°ã€‚

å¦‚æœææ–™æ¯”è¾ƒå¤æ‚ï¼Œä½ å¯ä»¥é€‚å½“ä¿®æ”¹ä¸€ä¸‹ææ–™çš„ç»“æ„ï¼Œå°†å®ƒå‘ˆç°å¾—æ›´ä¸ºæ¸…æ™°ã€‚

ä½ é¦–å…ˆå®¢è§‚æ•´ç†è®°å½•ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯ã€‚

ç„¶åä½ ç»“åˆ<ç»™AIçš„å‚è€ƒèµ„æ–™>è¿›è¡Œåˆ†æå¹¶é’ˆå¯¹ç”¨æˆ·è¾“å…¥å†…å®¹å……åˆ†è¡¨è¾¾ä½ çš„è§‚ç‚¹ã€‚å°†ä½ åˆ†æè¡¨è¾¾è§‚ç‚¹çš„éƒ¨åˆ†ä¸ç”¨æˆ·è¾“å…¥çš„åŸå§‹ä¿¡æ¯æ˜æ˜¾åŒºåˆ†å¼€æ¥ï¼Œä»¥â€œğŸ¤– AI è¡¥å……â€ä¸ºæ ‡é¢˜ã€‚

é‡‡ç”¨é€‚åˆçš„Markdownæ ¼å¼ï¼Œä¾¿äºåç»­ä¿å­˜å’Œé˜…è¯»ã€‚

å¦‚æœææ–™æœ‰å›¾ç‰‡å’Œå›¾ç‰‡æè¿°ï¼Œå°†å®ƒä»¬å¯¹åº”ä¸Šï¼Œä»¥â€œå›¾ç‰‡URLé“¾æ¥\n-å›¾ç‰‡æè¿°â€çš„æ–¹å¼å±•ç°ï¼Œ**ä¸è¦**ç”¨Markdownç›´æ¥å‘ˆç°å›¾ç‰‡ã€‚

## è¾“å‡º
title: ç¬”è®°æ ‡é¢˜
content: ç¬”è®°æ­£æ–‡

## ç»™AIçš„å‚è€ƒèµ„æ–™
{{reference}}

```

> ç”¨æˆ·æç¤ºè¯

```markdown
## æ–‡æœ¬å†…å®¹
{{input}}

## å›¾ç‰‡æè¿°
{{descriptions}}

## å›¾ç‰‡URL
{{images}}

```

æœ€åæ ¹æ®å¤„ç†ç»“æœè°ƒç”¨å®˜æ–¹é£ä¹¦æ–‡æ¡£æ’ä»¶ **create\_document** åˆ›å»ºé£ä¹¦æ–‡æ¡£ï¼Œå°†åˆ›å»ºåçš„æ–‡æ¡£URLè¿”å›ç»™ç»“æŸèŠ‚ç‚¹ã€‚

è¿™æ ·å°±å®ç°äº†åˆ›å»ºç¬”è®°æ–‡æ¡£çš„åŠŸèƒ½ï¼Œç„¶åæˆ‘ä»¬åˆ›å»ºå·¥ä½œæµ **AI\_Favrites\_Notes**ï¼Œå’Œå‰é¢å†…å®¹è½¬å†™çš„å·¥ä½œæµç±»ä¼¼ï¼Œå°†æµç¨‹ä¸²èµ·æ¥ï¼š

![å›¾ç‰‡](images/883388/18e20f0ab87312aa9932f932e1fe31a2.png)

æ³¨æ„è¿™é‡Œ AI\_Notes è¿”å›é£ä¹¦æ–‡æ¡£é“¾æ¥ï¼ŒAI\_Favorites è°ƒç”¨çš„æ—¶å€™ï¼Œtypeå‚æ•°ä¹Ÿæ˜¯è®¾ç½®ä¸ºâ€œç¬”è®°â€ã€‚

![å›¾ç‰‡](images/883388/c22e26926b5050b8248b9f5dcd58d002.png)

è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†æ•´ç†æ™ºèƒ½ç¬”è®°çš„åŠŸèƒ½ã€‚

## æŸ¥æ‰¾æ”¶è—èµ„æ–™

å½“æˆ‘ä»¬çš„æ”¶è—å†…å®¹å¤šäº†çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæŸ¥æ‰¾å·²æ”¶è—èµ„æ–™çš„åŠŸèƒ½ï¼š

![å›¾ç‰‡](images/883388/6ed74d33a58a58c3d405f6e756055e8f.png)

å› ä¸ºæˆ‘ä»¬æ”¶è—å†…å®¹çš„æ—¶å€™ï¼Œæ˜¯è®© AI æ‰“äº†æ ‡ç­¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ª **AI\_Favorites\_Search** å·¥ä½œæµï¼Œè®©AIå¸®æˆ‘ä»¬æŸ¥æ‰¾èµ„æ–™ã€‚

å®ƒçš„å®Œæ•´å·¥ä½œæµé€»è¾‘å¦‚ä¸‹ï¼š

![å›¾ç‰‡](images/883388/2d3757b0c009284238223e00e5b07f5f.png)

è¿™ä¸ªå·¥ä½œæµå‰é¢éƒ¨åˆ†æ˜¯å®¹é”™ï¼Œå…ˆé€šè¿‡æŸ¥æ‰¾fav\_tableè¡¨çš„è®°å½•ï¼Œçœ‹æ”¶è—è¡¨æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç»“æŸæŸ¥æ‰¾ã€‚

å¦‚æœæ”¶è—è¡¨å­˜åœ¨ï¼Œåˆ™å…ˆæ ¹æ®ç”¨æˆ·éœ€æ±‚ç”¨ä¸€ä¸ªå¤§æ¨¡å‹èŠ‚ç‚¹æå–æ ‡ç­¾ï¼š

![å›¾ç‰‡](images/883388/dbe784cf35ac9631878717bea9a73ef7.png)

ä¹‹æ‰€ä»¥è¦è¿™æ ·åšï¼Œæ˜¯å› ä¸ºç”¨æˆ·é€šå¸¸æ˜¯ç”¨è‡ªç„¶è¯­è¨€è¡¨è¾¾éœ€æ±‚çš„ï¼Œæ¯”å¦‚â€œå¸®æˆ‘æ‰¾ä¸€ä¸‹å…³äºå‰ç«¯çš„æ–‡ç« â€ï¼ŒAI éœ€è¦æå–å‡ºå¯¹åº”çš„æ ‡ç­¾ï¼Œæ¯”å¦‚æ ‡ç­¾å¯èƒ½æ˜¯â€œå‰ç«¯, HTML, CSS, JavaScriptâ€ã€‚

æ ‡ç­¾æå–ä¹‹åï¼Œæˆ‘ä»¬é€šè¿‡ä»£ç å’Œæ‰¹å¤„ç†èŠ‚ç‚¹æ¥å¤„ç†å¤šç»´è¡¨æ ¼çš„æŸ¥è¯¢ï¼š

![å›¾ç‰‡](images/883388/18afa84a5533fe6a205534469b1e3800.png)

æˆ‘ä»¬å…ˆç”Ÿæˆä¸€ç»„æŸ¥è¯¢æ¡ä»¶ï¼š

```typescript
async function main({ params }: Args): Promise<Output> {
    let tags = params.tags;

    // æ„å»ºè¾“å‡ºå¯¹è±¡
    const ret = {
        filters: tags.map(tag => ({
            filter: {
                conjunction: "or",
                conditions: [{
                    "field_name": "æ ‡ç­¾",
                    "operator": "contains",
                    "value": [
                        tag
                    ]
                }]
            }
        })),
    };

    return ret;
}

```

ç„¶åé€šè¿‡æ‰¹å¤„ç†èŠ‚ç‚¹æ ¹æ®æ¯ä¸ªæ ‡ç­¾åˆ†åˆ«æŸ¥è¯¢å¤šç»´è¡¨æ ¼ã€‚

![å›¾ç‰‡](images/883388/cda689efd50f27a4a9bcyya8cb0b62b9.png)

æœ€åå†é€šè¿‡ä»£ç å»é‡å’Œè¿‡æ»¤æ‰å·²åˆ é™¤çš„è®°å½•ï¼š

```typescript
async function main({ params }: Args): Promise<Output> {
    const results: any[] = params.input;
    const recordIds = new Set();

    const outputList: any[] = [];

    for(let i = 0; i < results.length; i++) {
        const result = results[i];
        if(!result.data) continue;
        const items = result.data.items;
        for(let j = 0; j < items.length; j++) {
            const item = items[j];
            if(!recordIds.has(item.record_id)) {
                const field = JSON.parse(item.fields);
                if (field['çŠ¶æ€']!=='å·²åˆ é™¤') {
                    outputList.push(field);
                }
                recordIds.add(item.record_id);
            }
        }
    }

    // æ„å»ºè¾“å‡ºå¯¹è±¡
    const ret = {
        outputList,
    };

    return ret;
}

```

å…¶å®æˆ‘ä»¬æœ¬æ¥ä¸ç”¨è¿™ä¹ˆåšï¼Œå› ä¸ºé£ä¹¦å¤šç»´è¡¨æ ¼æ”¯æŒfilterçš„å¤šçº§åµŒå¥—ï¼Œæˆ‘ä»¬æœ¬åº”è¯¥å¯ä»¥ç”¨ä¸€ä¸ªæŸ¥è¯¢æ¡ä»¶ç›´æ¥æŠŠç»“æœæŸ¥å‡ºæ¥ã€‚ä½†æ˜¯é£ä¹¦è¡¨æ ¼filterè®¾è®¡æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œå°±æ˜¯æˆ‘ä»¬å¦‚æœç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„tagå»ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œé‚£ä¹ˆé£ä¹¦å¤šç»´è¡¨æ ¼çš„filteræ‰§è¡Œå°±ä¼šæŠ¥é”™ï¼Œè€Œæˆ‘ä»¬çš„tagæ˜¯å¤§æ¨¡å‹ç”Ÿæˆçš„ï¼Œä¸èƒ½ä¿è¯å¤šç»´è¡¨æ ¼çš„æ•°æ®ä¸­å­˜åœ¨è¿™ä¸ªæ ‡ç­¾.æ‰€ä»¥æˆ‘å°±åªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ ‡ç­¾ä¸€ä¸ªæ ‡ç­¾å»è¿‡æ»¤ï¼Œç„¶åå†åˆå¹¶å»é‡ï¼Œè¿™æ ·å°±è§„é¿äº†é—®é¢˜ã€‚

æœ€åæˆ‘ä»¬å°†ç»“æœè¾“å‡ºåˆ°ç»“æŸèŠ‚ç‚¹å°±å¯ä»¥äº†ã€‚

## åˆ›å»ºæ™ºèƒ½ä½“

ç°åœ¨æˆ‘ä»¬çš„å·¥ä½œæµéƒ½å·²ç»è®¾è®¡å®Œæ¯•ï¼Œå¯ä»¥å¼€å§‹åˆ›å»ºæ™ºèƒ½ä½“äº†ã€‚

æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ™ºèƒ½æ”¶è—åŠ©æ‰‹çš„æ™ºèƒ½ä½“ï¼Œå°†å·¥ä½œæµéƒ½æ·»åŠ è¿›å»ï¼Œç„¶åç¼–å†™äººè®¾ä¸å›å¤ã€‚

![å›¾ç‰‡](images/883388/33014718d598ac75c0ff5096f04c91c3.png)

```typescript
ä½ å¸®æˆ‘ç”¨é£ä¹¦è¡¨æ ¼ç®¡ç†æ”¶è—å¤¹ï¼Œå½“æˆ‘å‘ç»™ä½ ä¸ªURLé“¾æ¥çš„æ—¶å€™ï¼Œä½ è°ƒç”¨ AI_Favorites å·¥ä½œæµï¼Œå®Œæˆè¯¥é“¾æ¥çš„æ”¶è—ï¼Œç„¶åè¿”å›é£ä¹¦æ–‡æ¡£é“¾æ¥ã€‚

å¦‚æœç”¨æˆ·æƒ³æœç´¢æŸäº›å†…å®¹ï¼Œä½ è°ƒç”¨ AI_Favorites_Search å·¥ä½œæµï¼Œæ ¹æ®è¿”å›å†…å®¹ï¼Œé€‰æ‹©è·Ÿç”¨æˆ·éœ€æ±‚æœ€åŒ¹é…çš„ä¸€äº›å†…å®¹å›å¤ã€‚

å¦‚æœç”¨æˆ·æƒ³å°†è‹±æ–‡ç½‘é¡µå†…å®¹è½¬å†™ä¸ºä¸­æ–‡ï¼Œä½ è°ƒç”¨ AI_Favorites_Rewrite å·¥å…·æµï¼Œå®Œæˆè¯¥ç½‘é¡µçš„è½¬å†™ï¼Œå¹¶æ”¶è—è‡³æ”¶è—å¤¹ï¼Œè¿”å›æ”¶è—å¤¹é“¾æ¥ã€‚

å¦‚æœç”¨æˆ·æƒ³è®°ä¸€æ®µç¬”è®°ï¼Œä½ è°ƒç”¨ AI_Favorites_Notes å·¥å…·æµï¼Œæ•´ç†ç¬”è®°åˆ°é£ä¹¦æ–‡æ¡£ï¼Œå¹¶æ”¶è—è‡³æ”¶è—å¤¹ï¼Œè¿”å›æ”¶è—å¤¹é“¾æ¥ã€‚æ³¨æ„ç”¨æˆ·ä¸Šä¼ çš„é™„ä»¶é€šè¿‡attachmentså‚æ•°ä¼ å…¥ã€‚

# æ³¨æ„
ä½ æ ¹æ® AI_Favorites è¿”å›çš„ç»“æœåˆ¤æ–­ï¼Œå¦‚æœisFirstUseæ˜¯yesï¼Œè¯´æ˜ç”¨æˆ·æ˜¯åˆæ¬¡ä½¿ç”¨ï¼Œä½ è¿”å›åå¯¹ç”¨æˆ·è¿›è¡Œä¸€ä¸ªè¡¥å……ä½¿ç”¨è¯´æ˜ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```

ä½ æ˜¯åˆæ¬¡ä½¿ç”¨ï¼Œæˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†æ–°çš„é£ä¹¦è¡¨æ ¼ï¼Œä½ å¯ä»¥ä¿®æ”¹â€œæ”¶è—æ—¶é—´â€çš„æ—¥æœŸæ ¼å¼ï¼Œå°†æ—¶é—´æ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶æ·»åŠ æ’åºè§„åˆ™æŒ‰æ”¶è—æ—¶é—´å€’åºæ’åˆ—ã€‚å¦å¤–ï¼Œä½ å¯ä»¥æ·»åŠ åˆ†ç»„ï¼ŒæŒ‰çŠ¶æ€åˆ†ç»„ï¼Œè¿™æ ·å¦‚æœä½ éœ€è¦åˆ é™¤è®°å½•ï¼Œåªè¦å°†è®°å½•çš„çŠ¶æ€æ ‡è®°ä¸ºå·²åˆ é™¤å³å¯ã€‚ä½ ä¹Ÿå¯ä»¥è®©æˆ‘å¸®ä½ åˆ é™¤æŒ‡å®šURLè®°å½•ã€‚

æˆ‘ä¼šç»™æ”¶è—çš„æ–‡ç« æ‰“æ ‡ç­¾ï¼Œä½ å¯ä»¥è®©æˆ‘å¸®ä½ æŸ¥æ‰¾æŒ‡å®šç±»å‹æˆ–æ ‡ç­¾çš„æ–‡ç« ï¼Œæ¯”å¦‚ä½ å¯ä»¥å¯¹æˆ‘è¯´â€œæŸ¥æ‰¾å’ŒCozeç›¸å…³çš„æ–‡ç« â€ã€‚

```

```

è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†æ™ºèƒ½æ”¶è—åŠ©æ‰‹çš„æ™ºèƒ½ä½“ã€‚

ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œåœ¨ä¸Šé¢çš„æˆªå›¾ä¸­ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªå·¥ä½œæµ **AI\_Favorites\_Del** æ²¡æœ‰å®ç°ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»æ”¶è—å¤¹ä¸­åˆ é™¤æŸä¸ªæ”¶è—é“¾æ¥ï¼Œå®é™…ä¸Šæ˜¯å°†å®ƒçš„è®°å½•çŠ¶æ€ä¿®æ”¹ä¸ºâ€œå·²åˆ é™¤â€ã€‚

ä¹‹æ‰€ä»¥è¿™ä¸ªæ²¡æœ‰å®ç°ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å…¶å®å¯ä»¥é€šè¿‡ç›´æ¥ä¿®æ”¹æ”¶è—å¤¹çš„å¤šç»´è¡¨æ ¼é‡Œé¢è®°å½•çš„çŠ¶æ€æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚å¦å¤–å› ä¸ºæˆ‘ä»¬é‡‡ç”¨å¤šç»´è¡¨æ ¼ï¼Œæ‰€ä»¥ä½ å¯ä»¥è°ƒæ•´å¤šç»´è¡¨æ ¼çš„è§†å›¾ï¼Œè¿›è¡Œåˆ†ç»„å’Œæ’åºï¼Œè®©å®ƒçš„å†…å®¹è¯»èµ·æ¥æ›´æ–¹ä¾¿ï¼Œè¿™å°±æ˜¯ç”¨å¤šç»´è¡¨æ ¼ä½œä¸ºæ”¶è—å¤¹çš„çµæ´»æ€§ã€‚

![å›¾ç‰‡](images/883388/cdcddbf4ee7fc3a4c917164829fdd3c3.png)

ä¸è¿‡ä½ æœ‰å…´è¶£çš„è¯ä»ç„¶å¯ä»¥å°è¯•è‡ªå·±å®ç° **AI\_Favorites\_Del** è¿™ä¸ªå·¥ä½œæµï¼Œæ·»åŠ å®ƒä½ å°±å¯ä»¥ä¸ç”¨æ‰“å¼€å¤šç»´è¡¨æ ¼ï¼Œè®©åŠ©æ‰‹å¸®ä½ è®¾ç½®åˆ é™¤çŠ¶æ€äº†ï¼Œæˆ‘ç‰¹æ„å°†è¿™å·¥ä½œæµä¿ç•™ï¼Œä½œä¸ºè¯¾åç»ƒä¹ ã€‚

## è¦ç‚¹æ€»ç»“

ä¸Šä¸€èŠ‚è¯¾å’Œè¿™ä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬å®Œæˆäº† AI æ™ºèƒ½æ”¶è—å¤¹çš„æ™ºèƒ½ä½“ã€‚é€šè¿‡è¿™ä¸ªå®è·µï¼Œæˆ‘å¸Œæœ›ä½ å·©å›ºè‡ªé¡¶å‘ä¸‹çš„ AI å·¥ä½œæµè®¾è®¡æ€è·¯å’Œå®ç°æ–¹æ³•ï¼ŒæŒæ¡æ„ç­‘å¤æ‚æµç¨‹çš„ AI æ™ºèƒ½ä½“çš„èƒ½åŠ›ã€‚

å€ŸåŠ© Coze å¹³å°çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿å¿«æ·åœ°åˆ›å»ºå·¥ä½œæµï¼Œä»è€Œåˆ›å»ºæ™ºèƒ½ä½“ï¼Œä½†æ˜¯æˆ‘ä»¬å®Œå…¨ä¹Ÿå¯ä»¥ç”¨å…¶ä»–çš„å¹³å°æˆ–è€…ç”¨ Ling æ¡†æ¶è‡ªå·±æ­å»ºå’Œå®ç°å·¥ä½œæµä¸æ™ºèƒ½ä½“ã€‚å¸Œæœ›å¤§å®¶é€šè¿‡å­¦ä¹ éƒ½èƒ½èä¼šè´¯é€šã€ä¸¾ä¸€åä¸‰ï¼ŒæœŸå¾…çœ‹åˆ°å¤§å®¶å®ç°æ›´ç²¾å½©çš„ AI æ™ºèƒ½ä½“ã€‚

## è¯¾åç»ƒä¹ 

å‰é¢è¯´äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å®ç°ä¸€ä¸‹ **AI\_Favorites\_Del** è¿™ä¸ªå·¥ä½œæµï¼Œèµ‹äºˆæ™ºèƒ½ä½“åˆ é™¤æ”¶è—è®°å½•çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥è¯•è¯•çœ‹ï¼Œå°†ä½ çš„å®ç°åˆ†äº«åˆ°è¯„è®ºåŒºå§ã€‚